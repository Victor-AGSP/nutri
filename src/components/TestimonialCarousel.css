.testi-carousel{border-radius:12px;background:linear-gradient(180deg,#ffffff,#f7fbff);box-shadow:0 18px 46px rgba(2,6,23,0.04);padding:20px}
.testi-carousel.two-cols .cols{display:flex;gap:18px}
.testi-col{flex:1;position:relative;min-height:140px;perspective:1200px}

.testi-col .card{position:absolute;inset:0;background:#fff;padding:18px;border-radius:12px;box-shadow:0 14px 40px rgba(2,6,23,0.06);display:flex;flex-direction:column;justify-content:center;transition:box-shadow .18s linear;transform-style:preserve-3d;backface-visibility:hidden;will-change:transform,opacity}
.testi-col .who{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.testi-col .avatar{width:48px;height:48px;border-radius:10px;background:linear-gradient(180deg,#06b6d4,#0891b2);color:white;display:flex;align-items:center;justify-content:center;font-weight:800}
.testi-col blockquote{font-style:italic;margin:0;color:#254049}

/* animation tuning */
:root{--testi-dur:1200ms;--testi-ease-in:cubic-bezier(.2,.9,.28,1);--testi-ease-out:cubic-bezier(.22,.85,.28,1)}

.testi-col .card.enter{ /* visible by default when not animating */
  transform:none;opacity:1;z-index:3;pointer-events:auto
}
.testi-col.anim .card.enter{ /* when animating, start the enter card in its offset/hidden state */
  transform:translate(20%,26%) translateZ(-140px) scale(.955) rotateX(6.5deg);
  opacity:0;pointer-events:none
}
.testi-col .card.enter.playing{animation:cardForward var(--testi-dur) var(--testi-ease-in) forwards;pointer-events:auto}
.testi-col .card.exit{transform:none;opacity:1;z-index:2;pointer-events:none}
.testi-col.anim .card.exit{animation:cardBackward var(--testi-dur) var(--testi-ease-out) forwards}
.testi-col.anim .card{ /* reduce heavy shadow while animating to avoid expensive repaints */
  box-shadow:0 8px 22px rgba(2,6,23,0.04)
}

@keyframes cardForward{
  /* new card: bottom-right -> front -> settle (reduced blur/translateZ for performance) */
  0%{transform:translate(18%,22%) translateZ(-80px) scale(.97) rotateX(5deg);opacity:0}
  24%{transform:translate(10%,16%) translateZ(-44px) scale(.99) rotateX(3deg);opacity:.4}
  52%{transform:translate(6%,8%) translateZ(-12px) scale(1.005) rotateX(1.1deg);opacity:.86}
  80%{transform:translate(2%,2%) translateZ(6px) scale(1.02) rotateX(.45deg);opacity:1}
  100%{transform:none;opacity:1}
}

@keyframes cardBackward{
  /* prev card: move up-left and recede smoothly (reduced depth to improve performance) */
  0%{transform:none;opacity:1}
  22%{transform:translate(-6%,-6%) translateZ(-22px) scale(.994) rotateX(-2deg);opacity:.98}
  50%{transform:translate(-12%,-12%) translateZ(-56px) scale(.988) rotateX(-4deg);opacity:.82}
  78%{transform:translate(-16%,-16%) translateZ(-100px) scale(.972) rotateX(-6deg);opacity:.58}
  100%{transform:translate(-20%,-20%) translateZ(-140px) scale(.95) rotateX(-8deg);opacity:.32}
}

@media (max-width:900px){
  .testi-carousel.two-cols .cols{gap:12px}
  .testi-col .card{padding:14px}
}

@media (max-width:700px){
  .testi-carousel.two-cols .cols{flex-direction:column}
  .testi-col{min-height:120px}
}
